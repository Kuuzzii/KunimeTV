<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Anime Details | KunimeTV</title>
  <link rel="stylesheet" href="home.css" />
  <style>
    /* Simple styles for detail page */
    body {
      background-color: #111;
      color: #eee;
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    h1 {
      color: #e60057;
    }
    img {
      float: left;
      margin-right: 20px;
      width: 250px;
      border-radius: 8px;
      box-shadow: 0 0 10px #e60057aa;
    }
    .tags {
      margin: 20px 0;
    }
    .tag {
      display: inline-block;
      background: #e60057;
      color: white;
      padding: 5px 12px;
      margin-right: 8px;
      border-radius: 4px;
      font-size: 14px;
    }
    .stats {
      margin-top: 20px;
    }
    .clear {
      clear: both;
    }
  </style>
</head>
<body>
  <div id="detail">
    Loading anime details...
  </div>

  <script>
 // Get 'id' from URL query string
function getQueryParam(param) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(param);
}

async function fetchAnimeDetails(id) {
  const detail = document.getElementById('detail');
  detail.textContent = 'Loading...';
  try {
    const response = await fetch(`https://api.jikan.moe/v4/anime/${id}/full`);
    if (!response.ok) throw new Error('Failed to fetch anime details');
    const data = await response.json();
    const anime = data.data;

    detail.innerHTML = `
      <div class="detail-header">
        <img src="${anime.images.jpg.large_image_url || anime.images.jpg.image_url}" alt="${anime.title}" />
        <div class="detail-info">
          <h1>${anime.title}</h1>
          <p>${anime.synopsis || 'No synopsis available.'}</p>
          <div class="tags">
            ${anime.genres.map(g => `<span class="tag">${g.name}</span>`).join(' ')}
          </div>
          <div class="stats">
            <strong>Episodes:</strong> ${anime.episodes ?? 'N/A'}<br />
            <strong>Year:</strong> ${anime.year ?? 'N/A'}<br />
            <strong>Score:</strong> ${anime.score ?? 'N/A'}/10<br />
            <strong>Status:</strong> ${anime.status ?? 'N/A'}
          </div>
        </div>
      </div>
    `;
  } catch (err) {
    detail.textContent = 'Error loading anime details.';
    console.error(err);
  }
}

const id = getQueryParam('id');
if (id) {
  fetchAnimeDetails(id);
} else {
  document.getElementById('detail').textContent = "No anime ID provided in URL.";
}

    const id = getQueryParam('id');
    if (id) {
      fetchAnimeDetails(id);
    } else {
      document.getElementById('detail').textContent = "No anime ID provided in URL.";
    }
  </script>
</body>
</html>
